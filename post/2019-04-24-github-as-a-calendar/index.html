<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="Github as a Calendar">
<meta itemprop="description" content="play with your github contribution 개발자들이라면 일반적으로 github 링크를 공유할일 들이 있습니다. 그런데 아무래도 github의 contribution calendar를 이쁘게 잘 채워놓는 것은 쉬운일이 아니라고 생각합니다. 이럴때 평소면 상관없지만 github 링크를 적는일이 있다면 신경쓰일수 밖에 없어집니다.
하지만 git은 commit 시간을 지정해서 작성 가능하기 때문에 원하는 시간에 맞게 commit들을 생성가능 하고 이를 통해서 github contribution을 꾸밀 수 있습니다.
그리고 이런것들을 쉽게 도와 주는 다양한 툴들이 있습니다.
 github-contributions github-spray  만약 이런걸 모르는 사람이 있다면 적어도 당신에게 흥미로워 할것같습니다.">
<meta itemprop="datePublished" content="2019-04-24T08:55:44&#43;09:00" />
<meta itemprop="dateModified" content="2019-04-24T08:55:44&#43;09:00" />
<meta itemprop="wordCount" content="717">
<meta itemprop="image" content="http://leoh0.github.io/images/2019-04-24-085809_650x202_scrot.png">



<meta itemprop="keywords" content="git,github,calendar," /><meta property="og:title" content="Github as a Calendar" />
<meta property="og:description" content="play with your github contribution 개발자들이라면 일반적으로 github 링크를 공유할일 들이 있습니다. 그런데 아무래도 github의 contribution calendar를 이쁘게 잘 채워놓는 것은 쉬운일이 아니라고 생각합니다. 이럴때 평소면 상관없지만 github 링크를 적는일이 있다면 신경쓰일수 밖에 없어집니다.
하지만 git은 commit 시간을 지정해서 작성 가능하기 때문에 원하는 시간에 맞게 commit들을 생성가능 하고 이를 통해서 github contribution을 꾸밀 수 있습니다.
그리고 이런것들을 쉽게 도와 주는 다양한 툴들이 있습니다.
 github-contributions github-spray  만약 이런걸 모르는 사람이 있다면 적어도 당신에게 흥미로워 할것같습니다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leoh0.github.io/post/2019-04-24-github-as-a-calendar/" />
<meta property="og:image" content="http://leoh0.github.io/images/2019-04-24-085809_650x202_scrot.png" />
<meta property="article:published_time" content="2019-04-24T08:55:44+09:00" />
<meta property="article:modified_time" content="2019-04-24T08:55:44+09:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://leoh0.github.io/images/2019-04-24-085809_650x202_scrot.png"/>

<meta name="twitter:title" content="Github as a Calendar"/>
<meta name="twitter:description" content="play with your github contribution 개발자들이라면 일반적으로 github 링크를 공유할일 들이 있습니다. 그런데 아무래도 github의 contribution calendar를 이쁘게 잘 채워놓는 것은 쉬운일이 아니라고 생각합니다. 이럴때 평소면 상관없지만 github 링크를 적는일이 있다면 신경쓰일수 밖에 없어집니다.
하지만 git은 commit 시간을 지정해서 작성 가능하기 때문에 원하는 시간에 맞게 commit들을 생성가능 하고 이를 통해서 github contribution을 꾸밀 수 있습니다.
그리고 이런것들을 쉽게 도와 주는 다양한 툴들이 있습니다.
 github-contributions github-spray  만약 이런걸 모르는 사람이 있다면 적어도 당신에게 흥미로워 할것같습니다."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Github as a Calendar</title>
	<link rel="stylesheet" href="https://leoh0.github.io/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css" integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin="anonymous">
	<style>.bg-img {background-image: url('http://leoh0.github.io/images/2019-04-24-085809_650x202_scrot.png');}</style>
	<link rel="stylesheet" href="https://leoh0.github.io/css/prism.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://leoh0.github.io/">&gt; /dev/null</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://leoh0.github.io/">Home</a>
				<a href="https://leoh0.github.io/post/">Posts</a>
				<a href="https://leoh0.github.io/about/aboutme">AboutMe</a>
				<a href="https://leoh0.github.io/blog/">.</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="img-btn" class="hdr-btn" title="Featured Image"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/leoh0" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://leoh0.github.io/">Home</a></li>
			<li><a href="https://leoh0.github.io/post/">Posts</a></li>
			<li><a href="https://leoh0.github.io/about/aboutme">AboutMe</a></li>
			<li><a href="https://leoh0.github.io/blog/">.</a></li>
		</ul>
	</div>


	<div class="bg-img"></div>
	<main class="site-main section-inner thin animated fadeIn faster">
		<h1>Github as a Calendar</h1>
		<div class="content">
			<figure>
    <img src="http://leoh0.github.io/images/2019-04-24-085809_650x202_scrot.png"/> 
</figure>

<h1 id="play-with-your-github-contribution">play with your github contribution<a href="#play-with-your-github-contribution" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>개발자들이라면 일반적으로 github 링크를 공유할일 들이 있습니다.
그런데 아무래도 github의 contribution calendar를 이쁘게 잘 채워놓는 것은 쉬운일이 아니라고 생각합니다.
이럴때 평소면 상관없지만 github 링크를 적는일이 있다면 신경쓰일수 밖에 없어집니다.</p>
<p>하지만 git은 commit 시간을 지정해서 작성 가능하기 때문에 원하는 시간에 맞게 commit들을 생성가능 하고 이를 통해서 github contribution을 꾸밀 수 있습니다.</p>
<p>그리고 이런것들을 쉽게 도와 주는 다양한 툴들이 있습니다.</p>
<ul>
<li><a href="https://github.com/IonicaBizau/github-contributions">github-contributions</a></li>
<li><a href="https://github.com/Annihil/github-spray">github-spray</a></li>
</ul>
<p>만약 이런걸 모르는 사람이 있다면 적어도 당신에게 흥미로워 할것같습니다.</p>
<h1 id="github-as-a-calendar">github as a calendar<a href="#github-as-a-calendar" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>그렇다면 재미를 위해 이걸 이용해서 오늘의 날짜를 표현해주는 script를 공유해봅니다.</p>
<p>아래 스크립트는 debian 계열에서 우선 동작하도록 되어 있는데 <code>timezone</code> 패키지만 설치되어 있으면 다른곳에서도 동작 가능 합니다.</p>
<h3 id="설정">설정<a href="#설정" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>스크립트를 사용하기 전 아래 5개의 환경변수를 셋업 해야 합니다.</p>
<ul>
<li>
<p>COMMIT_USERNAME</p>
<p>COMMIT_USERNAME 은 커밋에 적힐 username입니다.</p>
<pre><code>export COMMIT_USERNAME=&quot;Eohyung Lee&quot;
</code></pre></li>
<li>
<p>COMMIT_USEREMAIL</p>
<p>COMMIT_USEREMAIL 은 커밋에 적힐 email입니다. github에 등록되어 있는 email을 사용하는게 좋습니다.</p>
<pre><code>export COMMIT_USEREMAIL=liquidnuker@gmail.com
</code></pre></li>
<li>
<p>GITHUB_USERNAME</p>
<p>GITHUB_USERNAME 은 github계정입니다.</p>
<pre><code>export GITHUB_USERNAME=leoh0
</code></pre></li>
<li>
<p>GITHUB_REPOSITORY</p>
<p>GITHUB_REPOSITORY 은 이 가짜 커밋 데이터들을 생성할 레포지토리 입니다.
<strong>이 레포지토리는 매번 github calendar를 깨끗히 초기화 시키기 위해 생성전에 삭제합니다.</strong></p>
<pre><code>export COMMIT_USERNAME=&quot;Eohyung Lee&quot;
</code></pre></li>
<li>
<p>GITHUB_APITOKEN</p>
<p>GITHUB_APITOKEN 은 github을 API로 이용하기 위한 token입니다.
<a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">이 링크</a>를 참고하시면 token 생성방법을 확인 가능합니다.</p>
<p><strong>이 토큰은 반드시 <code>delete_repo</code>, <code>repo</code>의 권한을 가지고 있어야 합니다.</strong></p>
<pre><code>export GITHUB_APITOKEN=*******************************************
</code></pre></li>
<li>
<p>옵션</p>
<p>추가로 <code>export USEPRIVATE=true</code>를 사용하면 private repository를 이용할 수 있습니다. private repository를 이용하는 이유는 쓸데없이 follower 들에게 알람이 가지 않도록 하기 위함 입니다. 다만 이 옵션을 사용할 경우엔 contribution settings 에서 아래와 같이 <code>Private contributions</code> 옵션을 켜줘야 합니다.</p>
<figure>
    <img src="http://leoh0.github.io/images/2019-04-25-103218_755x242_scrot.png"/> 
</figure>

</li>
</ul>
<h3 id="실행">실행<a href="#실행" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>저는 이런 것들을 돌리기 위해서 gcp 에서 <a href="https://cloud.google.com/free/docs/gcp-free-tier#always-free-usage-limits">always free</a>인 자원을 사용합니다. <code>f1-micro</code>에 특정 지역인 경우 무료이기 때문에 이런 장난감을 돌리기 용의 합니다. 그래서 우선 gcp 에서 us-east1 리전에서 f1-micro에 ubuntu-18.04 이미지로 사용했습니다.</p>
<p>부팅 이후 아래와 같이 실행하면 cron이 등록 됩니다. 이후 <code>밤 12시 정각부터 cron으로 구동되어 github contribution을 업데이트</code> 해주게 됩니다. 보통 정각에 구동되면 반영되기 까지 1-2분 정도 소요됩니다.</p>
<p>다른 환경에서 구동시키려면 아래 스크립트를 돌리기 전에 스크립트 내용을 아시면 좋습니다.</p>
<pre><code>curl https://gist.githubusercontent.com/leoh0/06f763c23b46e1f07c05a4df7c9abdc2/raw/fd90af927cbd264c233998ca3ee4483fa78aa6ff/github-contribution-as-a-calendar.sh | bash
</code></pre><h3 id="review-code">Review code<a href="#review-code" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><a href="https://gist.github.com/leoh0/06f763c23b46e1f07c05a4df7c9abdc2">gist link</a></p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0f0;font-weight:bold">#!/bin/bash
</span><span style="color:#0f0;font-weight:bold"></span>
<span style="color:#fff;font-weight:bold">set</span> -e
<span style="color:#fff;font-weight:bold">set</span> -o pipefail

USEPRIVATE=<span style="color:#0ff;font-weight:bold">${</span>USEPRIVATE<span style="color:#fff;font-weight:bold">:-</span>false<span style="color:#0ff;font-weight:bold">}</span>

<span style="color:#fff;font-weight:bold">if</span> [[ -z <span style="color:#0ff;font-weight:bold">&#34;</span>$COMMIT_USERNAME<span style="color:#0ff;font-weight:bold">&#34;</span> <span style="color:#0ff;font-weight:bold">\
</span><span style="color:#0ff;font-weight:bold"></span>    || -z <span style="color:#0ff;font-weight:bold">&#34;</span>$COMMIT_USEREMAIL<span style="color:#0ff;font-weight:bold">&#34;</span> <span style="color:#0ff;font-weight:bold">\
</span><span style="color:#0ff;font-weight:bold"></span>    || -z <span style="color:#0ff;font-weight:bold">&#34;</span>$GITHUB_USERNAME<span style="color:#0ff;font-weight:bold">&#34;</span> <span style="color:#0ff;font-weight:bold">\
</span><span style="color:#0ff;font-weight:bold"></span>    || -z <span style="color:#0ff;font-weight:bold">&#34;</span>$GITHUB_REPOSITORY<span style="color:#0ff;font-weight:bold">&#34;</span> <span style="color:#0ff;font-weight:bold">\
</span><span style="color:#0ff;font-weight:bold"></span>    || -z <span style="color:#0ff;font-weight:bold">&#34;</span>$GITHUB_APITOKEN<span style="color:#0ff;font-weight:bold">&#34;</span> ]]; <span style="color:#fff;font-weight:bold">then</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;You need set below variables before run this script&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# COMMIT_USERNAME is for your commit user name&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;export COMMIT_USERNAME=&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# COMMIT_USEREMAIL is for your commit email&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;export COMMIT_USEREMAIL=&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# GITHUB_USERNAME is for github user name&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;export GITHUB_USERNAME=&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# GITHUB_REPOSITORY is for pushed dummy datas which included commits for github contribution calendar.&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# Attention!: This repository is always *DELETED* before it is created because of cleansing github contribution calendar. So please use disposable repository.&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;export GITHUB_REPOSITORY=&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# GITHUB_APITOKEN is for github API&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# This token MUST include follow permissions. delete_repo, repo&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;# https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line&#34;</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;export GITHUB_APITOKEN=&#34;</span>

    <span style="color:#fff;font-weight:bold">exit</span> <span style="color:#ff0;font-weight:bold">1</span>
<span style="color:#fff;font-weight:bold">fi</span>

<span style="color:#007f7f"># setup date for using timezone</span>
<span style="color:#fff;font-weight:bold">if</span> [ ! -d <span style="color:#0ff;font-weight:bold">&#34;/usr/share/zoneinfo&#34;</span> ]; <span style="color:#fff;font-weight:bold">then</span>
    <span style="color:#fff;font-weight:bold">export</span> DEBIAN_FRONTEND=noninteractive
    ERROR=<span style="color:#0ff;font-weight:bold">&#34;ERROR: Installing timezone package is failed so you need to install &#34;</span>
    ERROR=<span style="color:#0ff;font-weight:bold">&#34;</span>$ERROR<span style="color:#0ff;font-weight:bold"> timezone package by yourself before run this script.&#34;</span>
    sudo apt update
    sudo apt install -y tzdata || ( <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;</span>$ERROR<span style="color:#0ff;font-weight:bold">&#34;</span> ; <span style="color:#fff;font-weight:bold">exit</span> <span style="color:#ff0;font-weight:bold">1</span> )
<span style="color:#fff;font-weight:bold">fi</span>

<span style="color:#007f7f"># setup github-contribution bin</span>
mkdir -p <span style="color:#0ff;font-weight:bold">&#34;</span>$HOME<span style="color:#0ff;font-weight:bold">/bin&#34;</span>

<span style="color:#fff;font-weight:bold">if</span> [[ <span style="color:#0ff;font-weight:bold">&#34;</span>$USEPRIVATE<span style="color:#0ff;font-weight:bold">&#34;</span> == <span style="color:#fff;font-weight:bold">true</span> ]]; <span style="color:#fff;font-weight:bold">then</span>
    PRIVATE=<span style="color:#0ff;font-weight:bold">&#34;, \\\&#34;private\\\&#34;: true&#34;</span>
<span style="color:#fff;font-weight:bold">fi</span>

cat <span style="color:#0ff;font-weight:bold">&lt;&lt; EOF &gt; &#34;$HOME/bin/update-github-contribution.sh&#34;
</span><span style="color:#0ff;font-weight:bold">#!/bin/bash
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">set -e
</span><span style="color:#0ff;font-weight:bold">set -o pipefail
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">if [[ &#34;\$(env TZ=Asia/Seoul date +%H)&#34; != &#34;00&#34; ]]; then
</span><span style="color:#0ff;font-weight:bold">    echo &#34;Only working at KST(Asia/Seoul) midnight&#34;
</span><span style="color:#0ff;font-weight:bold">    exit 0
</span><span style="color:#0ff;font-weight:bold">fi
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">curl -s -S -n -XDELETE \\
</span><span style="color:#0ff;font-weight:bold">    &#34;https://api.github.com/repos/$GITHUB_USERNAME/$GITHUB_REPOSITORY&#34;
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">curl -s -S -f -n -XPOST \\
</span><span style="color:#0ff;font-weight:bold">    -d &#34;{\&#34;name\&#34;: \&#34;$GITHUB_REPOSITORY\&#34;$PRIVATE}&#34; \\
</span><span style="color:#0ff;font-weight:bold">    &#34;https://api.github.com/user/repos&#34;
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">docker run \\
</span><span style="color:#0ff;font-weight:bold">        --rm \\
</span><span style="color:#0ff;font-weight:bold">        --name github-spray \\
</span><span style="color:#0ff;font-weight:bold">        -i \\
</span><span style="color:#0ff;font-weight:bold">        -e &#34;USERNAME=$COMMIT_USERNAME&#34; \\
</span><span style="color:#0ff;font-weight:bold">        -e &#34;USEREMAIL=$COMMIT_USEREMAIL&#34; \\
</span><span style="color:#0ff;font-weight:bold">        -v $HOME/.netrc:/root/.netrc \\
</span><span style="color:#0ff;font-weight:bold">        leoh0/github-spray \\
</span><span style="color:#0ff;font-weight:bold">        -t &#34;\$(env TZ=Asia/Seoul date &#39;+%x&#39;)&#34; \\
</span><span style="color:#0ff;font-weight:bold">        --multiplier 10 \\
</span><span style="color:#0ff;font-weight:bold">        --push \\
</span><span style="color:#0ff;font-weight:bold">        --origin https://github.com/$GITHUB_USERNAME/$GITHUB_REPOSITORY.git
</span><span style="color:#0ff;font-weight:bold">EOF</span>

chmod +x <span style="color:#0ff;font-weight:bold">&#34;</span>$HOME<span style="color:#0ff;font-weight:bold">/bin/update-github-contribution.sh&#34;</span>

<span style="color:#007f7f"># setup netrc</span>
cat <span style="color:#0ff;font-weight:bold">&lt;&lt; EOF &gt; &#34;$HOME/.netrc&#34;
</span><span style="color:#0ff;font-weight:bold">machine github.com
</span><span style="color:#0ff;font-weight:bold">  login $GITHUB_USERNAME
</span><span style="color:#0ff;font-weight:bold">  password $GITHUB_APITOKEN
</span><span style="color:#0ff;font-weight:bold">
</span><span style="color:#0ff;font-weight:bold">machine api.github.com
</span><span style="color:#0ff;font-weight:bold">  login $GITHUB_USERNAME
</span><span style="color:#0ff;font-weight:bold">  password $GITHUB_APITOKEN
</span><span style="color:#0ff;font-weight:bold">EOF</span>

<span style="color:#007f7f"># setup cron</span>
<span style="color:#fff;font-weight:bold">if</span> ! crontab -l | grep -q update-github-contribution.sh; <span style="color:#fff;font-weight:bold">then</span>
    <span style="color:#007f7f"># ensure exist</span>
    sudo touch <span style="color:#0ff;font-weight:bold">&#34;/var/spool/cron/crontabs/</span>$USER<span style="color:#0ff;font-weight:bold">&#34;</span>
    sudo chmod <span style="color:#ff0;font-weight:bold">600</span> <span style="color:#0ff;font-weight:bold">&#34;/var/spool/cron/crontabs/</span>$USER<span style="color:#0ff;font-weight:bold">&#34;</span>
    sudo chown <span style="color:#0ff;font-weight:bold">&#34;</span>$USER<span style="color:#0ff;font-weight:bold">&#34;</span>.crontab <span style="color:#0ff;font-weight:bold">&#34;/var/spool/cron/crontabs/</span>$USER<span style="color:#0ff;font-weight:bold">&#34;</span>

    <span style="color:#007f7f"># add to cron</span>
    crontab -l &gt; tempcron

    <span style="color:#007f7f"># work every our for supporting different timezone</span>
    <span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;0 * * * * </span>$HOME<span style="color:#0ff;font-weight:bold">/bin/update-github-contribution.sh 2&gt;&amp;1 | \
</span><span style="color:#0ff;font-weight:bold">/usr/bin/logger -t github-contribution&#34;</span> &gt;&gt; tempcron

    crontab tempcron
    rm -f tempcron
<span style="color:#fff;font-weight:bold">fi</span>

<span style="color:#007f7f"># setup docker</span>
<span style="color:#fff;font-weight:bold">if</span> ! <span style="color:#fff;font-weight:bold">command</span> -v docker &gt;/dev/null ; <span style="color:#fff;font-weight:bold">then</span>
    curl https://releases.rancher.com/install-docker/18.09.sh | sh

    sudo usermod -aG docker <span style="color:#0ff;font-weight:bold">&#34;</span>$USER<span style="color:#0ff;font-weight:bold">&#34;</span>
<span style="color:#fff;font-weight:bold">fi</span>
</code></pre></div>
		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2021 <a href="https://leoh0.github.io/"></a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://leoh0.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://leoh0.github.io/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-46519012-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
