<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: chef | > /dev/null]]></title>
  <link href="http://leoh0.github.io/blog/categories/chef/atom.xml" rel="self"/>
  <link href="http://leoh0.github.io/"/>
  <updated>2016-05-10T03:20:11+09:00</updated>
  <id>http://leoh0.github.io/</id>
  <author>
    <name><![CDATA[leoh0]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[custom URL for chef server 12]]></title>
    <link href="http://leoh0.github.io/blog/2015/02/24/custom-url-for-chef-server-12/"/>
    <updated>2015-02-24T23:29:19+09:00</updated>
    <id>http://leoh0.github.io/blog/2015/02/24/custom-url-for-chef-server-12</id>
    <content type="html"><![CDATA[<p>chef server ssl verification 때문에 그냥 domain 인증서를 제대로 적용하려고 했는데 엄청 삽질했다. 아마 chef 11 에서 chef 12 로 올라가면서 config 위치가 변경된거 같다.</p>

<p><a href="http://www.bitlancer.com/2014/10/custom-chef-server-url/">여기</a>에서 관련 정보를 얻을 수 있었는데 차이점은 /etc/chef-server/chef-server.rb 가 아닌 /etc/opscode/chef-server.rb 파일을 수정해서 적용 가능했다.</p>

<p>아래 처럼 해당 파일을 수정한다.</p>

<pre><code class="ruby /etc/opscode/chef-server.rb">...
server_name = "chef.yourdomain.com"
api_fqdn = server_name
bookshelf['vip'] = server_name
nginx['url'] = "https://#{server_name}"
nginx['server_name'] = server_name
nginx['ssl_certificate'] = "/var/opt/chef-server/nginx/ca/#{server_name}.crt"
nginx['ssl_certificate_key'] = "/var/opt/chef-server/nginx/ca/#{server_name}.key"
lb['fqdn'] = server_name
</code></pre>

<p>이후에 해당 컨피그 내용으로 적용한다.</p>

<pre><code class="bash">chef-server-ctl reconfigure
</code></pre>

<p>이후 테스트해보면 끝.</p>
]]></content>
  </entry>
  
</feed>
